---
# used when we make a change to the user like them
# to a group
- name: Reset ssh connection
  ansible.builtin.meta:
    reset_connection

- name: Restart systemd-networkd
  become: true
  ansible.builtin.systemd:
    name: systemd-networkd
    state: restarted
  register: restart_networkd_result
  ignore_errors: true

- name: Warn if systemd-networkd restart failed
  ansible.builtin.debug:
    msg: "Warning: Failed to restart systemd-networkd: {{ restart_networkd_result.msg | default('Unknown error') }}"
  when: restart_networkd_result is failed

- name: Reload systemd
  become: true
  ansible.builtin.systemd:
    daemon_reload: true
  register: systemd_daemon_reload_result
  ignore_errors: true

- name: Warn if systemd daemon-reload failed
  ansible.builtin.debug:
    msg: "Warning: Failed to reload systemd daemon: {{ systemd_daemon_reload_result.msg | default('Unknown error') }}"
  when: systemd_daemon_reload_result is failed
